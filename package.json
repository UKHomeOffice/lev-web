{
  "name": "lev-web",
  "description": "Life Event Verification Web Interface",
  "version": "0.0.1",
  "main": "app.js",
  "scripts": {
    "start": "node .",
    "stop": "pkill levweb || true",
    "dev": "npm-run-all -s stop:all acceptance:pause dev:up",
    "dev:up": "npm-run-all -p dev:frontend dev:backend",
    "dev:frontend": "npm-run-all -p watch:sass watch:js watch:chimp",
    "dev:backend": "npm-run-all -p start:mock-kc-proxy watch:app start:mockapi watch:unit",
    "watch:app": "NODE_ENV=development nodemon -w app.js -w config.js -w routes -w middleware -w locales -w lib -w fields -w controllers -w api .",
    "test": "npm-run-all lint cover check-coverage test:acceptance",
    "test:unit": "NODE_ENV=test mocha ./test/unit",
    "watch:unit": "nodemon -w app.js -w config.js -w routes -w middleware -w locales -w lib -w fields -w controllers -w api -w test/unit -e js,json -x 'npm-run-all -s acceptance:pause lint cover acceptance:play'",
    "test:acceptance": "npm-run-all stop:mockapi start:mockapi test:acceptance:sub stop:mockapi",
    "test:acceptance:sub": "npm-run-all -pr start:mock-kc-proxy start:acceptance chimp",
    "test:ci": "npm-run-all lint cover check-coverage ci:acceptance",
    "ci:acceptance": "npm-run-all -pr start:mock-kc-proxy chimp",
    "start:acceptance": "NODE_ENV=acceptance npm start",
    "start:mockapi": "docker run -d -p 8080:8080 --name lev-api-mock quay.io/ukhomeofficedigital/lev-api-mock:v1.2.1-117-0978aa84d33711118362d15a7a5cc2d5b37c908e",
    "start:mock-kc-proxy": "node test/acceptance/mock-kc-proxy/front.js",
    "stop:mockapi": "npm-run-all -s -c --silent stop:mockapi:kill stop:mockapi:rm",
    "stop:mockapi:kill": "docker kill lev-api-mock || true",
    "stop:mockapi:rm": "docker rm lev-api-mock || true",
    "stop:mock-kc-proxy": "killall lev-keycloak-proxy || true",
    "stop:all": "npm-run-all -c stop:mockapi stop:mock-kc-proxy stop",
    "acceptance:pause": "touch ./.acceptance.lock",
    "acceptance:play": "rm ./.acceptance.lock ; touch ./.acceptance.trgr",
    "watch:chimp": "nodemon -d 1 -w test/acceptance -w views -w locales -w .acceptance.trgr -e js,json,html,trgr -x 'npm run chimp:check'",
    "chimp:check": "ls ./.acceptance.lock 2> /dev/null && printf '\n==> NOTE: Waiting for linting and unit tests to complete before running E2E tests\n\n' || npm run chimp",
    "chimp": "NODE_ENV=acceptance chimp --mocha --browser=phantomjs --path=./test/acceptance/spec/",
    "chimp:ff": "NODE_ENV=acceptance chimp --mocha --browser=firefox --path=./test/acceptance/spec/ --watch",
    "lint": "eslint .",
    "lint:fix": "eslint --fix .",
    "lint:client": "eslint ./assets/js",
    "cover": "istanbul cover _mocha -- ./test/unit",
    "check-coverage": "istanbul check-coverage --statement 95 --branch 85 --function 100 --line 95",
    "sass": "node-sass ./assets/scss/app.scss ./public/css/app.css --include-path ./node_modules",
    "watch:sass": "nodemon -w assets/scss -e scss -x 'npm run sass'",
    "copy:images": "cp -r ./assets/images ./public/",
    "uglify": "browserify -g uglifyify ./assets/js/index.js > ./public/js/bundle.js",
    "watch:js": "nodemon -w assets/js -x 'npm-run-all -s lint:client uglify'",
    "browserify": "browserify ./assets/js/index.js > ./public/js/bundle.js",
    "create:public": "mkdir -p ./public/css ./public/images ./public/js",
    "postinstall": "npm-run-all create:public sass copy:images uglify",
    "snyk-protect": "snyk protect",
    "prepublish": "npm run snyk-protect"
  },
  "dependencies": {
    "body-parser": "^1.17.1",
    "browserify": "^13.0.1",
    "churchill": "0.2.0",
    "express": "^4.15.2",
    "express-partial-templates": "^0.1.0",
    "express-session": "^1.12.1",
    "hof": "^8.0.0",
    "hogan-express-strict": "^0.5.4",
    "hogan.js": "^3.0.2",
    "lodash": "^4.13.1",
    "moment": "^2.10.6",
    "moment-round": "^1.0.1",
    "node-sass": "^3.7.0",
    "npm-run-all": "^3.1.2",
    "request": "^2.67.0",
    "snyk": "^1.19.1",
    "uglifyify": "^3.0.1",
    "winston": "^1.0.1"
  },
  "devDependencies": {
    "chai": "^3.4.1",
    "chai-as-promised": "^5.3.0",
    "chimp": "^0.42.0",
    "eslint": "^3.4.0",
    "eslint-plugin-filenames": "^1.0.0",
    "eslint-plugin-mocha": "^4.5.0",
    "eslint-plugin-one-variable-per-var": "0.0.3",
    "http-proxy": "^1.15.2",
    "istanbul": "^0.4.3",
    "jscs": "^3.0.2",
    "mocha": "^3.0.2",
    "nodemon": "^1.8.1",
    "proxyquire": "^1.7.3",
    "reqres": "^1.2.2",
    "rewire": "^2.5.2",
    "sinon": "^1.17.2",
    "sinon-chai": "^2.8.0"
  },
  "snyk": true
}